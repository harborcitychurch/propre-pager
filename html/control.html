<!DOCTYPE html>
<html>
    <head>
        <title>Pager Dispatch</title>
        <script src="/scripts/common.js"></script>
        <script src="/scripts/control.js"></script>

        <link rel="stylesheet" type="text/css" href="/styles/common.css">
        <link rel="stylesheet" type="text/css" href="/styles/control.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
        <link rel="manifest" href="/site.webmanifest">
        <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ff9800">
        <meta name="msapplication-TileColor" content="#da532c">
        <meta name="theme-color" content="#ffffff">
    </head>
    <body>
        <audio id="notify_sound" src="/notify.mp3" preload="auto"></audio>
        <div id="header">
            <div id="logo"><img src="/header_logo.png"></div>
            <div id="pager_form_container">
                <form id="pager_form">
                    <label for="child_number">Child:</label>
                    <input type="text" id="child_number" name="child_number" placeholder="000" pattern="[0-9]{3}" title="Child number must be 3 digits" required autocomplete="off"><br>
                    <label for="room">Room:</label>
                    <select id="room" name="room"></select><br>
                    <button type="submit" value="Submit">Queue</button>
                </form>
            </div>
        </div>
        <div id="clock"></div>
        <div id="toast" class="toast hidden">
            <span id="toast-message"></span>
        </div>

        <h2>Parent Paging System Control</h2>
        
        <div id="settings_container">
            <h3>ProPresenter Settings <span id="expand_settings" class="material-icons" onclick="toggleSettings()">remove</span></h3>
            <div class="settings"> 
                ProPresenter Address: 
                <input type="text" id="propresenter_address" placeholder="ProPresenter Address"> 
                &nbsp;&nbsp;Port: 
                <input type="text" id="propresenter_port" value="1025" placeholder="1025">
            </div>
            <div class="settings">
                <label for="propresenter_message_name">ProPresenter Message Name:</label>
                <select id="propresenter_message_name">
                </select>
                <span class="settings" id="propresenter_message_uuid">00000000-0000-0000-0000-000000000000</span>
            </div>
            <div class="settings">
                Switch Interval:&nbsp;<input id="auto_page_interval" type="number" min="1" max="60" value="10" required> seconds
            </div>
            <div class="settings">
                <button id="auto_page_button" onclick="toggleAutoPage()" class="inactive">Auto Page: OFF</button>
                <div id="auto_page_indicator" class="off"></div>
            </div>
        </div>
        <div id="status_bar">
            <div id="connection_status"></div>
        </div>
        
        <div class="table_container">
            <h3>Pager Queue</h3>
            <table id="pager_list">
            <thead>
                <tr>
                    <th>Child #</th>
                    <th>Room</th>
                    <th>Min</th>
                    <th></th>
                </tr>
            </thead>
            <tbody></tbody>
            </table>
        </div>
        <div class="table_container">
            <h3>Active Pages</h3>
            <table id="active_pages">
                <thead>
                    <tr>
                        <th>Child #</th>
                        <th>Room</th>
                        <th>Expires</th>
                        <th></th>
                    </tr>
                </thead>
            <tbody></tbody>
            </table>
        </div>
        <div class="table_container">
            <h3>Previous Pages</h3>
            <table id="prev_pages">
                <thead>
                    <tr>
                        <th>Child #</th>
                        <th>Room</th>
                        <th>Status</th>
                        <th>Time</th>
                    </tr>
                </thead>
            <tbody></tbody>
            </table>
        </div>
        <div id="health_status"><span id="host-server-status" class="material-icons">check_circle</span>&nbsp;<span id="host-server-status-text" class="hidden">Host Server OK</span></div>&nbsp;
        <div id="footer">
            <p>&copy; 2024 Harbor City Church</p>
        </div>
    </body>
</html>